# Environment Variables

This file documents the environment variables required for the admin_side module.

## Required Environment Variables

### my-cms Backend API (https://github.com/doitsu2014/my-cms)
```bash
# GraphQL API endpoint (required)
PUBLIC_GRAPHQL_API_URL=http://localhost:8989/graphql
# GraphQL Cache API endpoint (optional)
PUBLIC_GRAPHQL_CACHE_API_URL=http://localhost:8989/graphql
# REST API base URL (my-cms also provides REST endpoints)
PUBLIC_REST_API_URL=http://localhost:8989/api
# Media upload endpoint
PUBLIC_MEDIA_UPLOAD_API_URL=http://localhost:8989/api/media/upload
```

### Keycloak Authentication (Phase 8)
```bash
# Keycloak server URL
PUBLIC_KEYCLOAK_URL=https://my-ids-admin.ducth.dev
# Keycloak realm name
PUBLIC_KEYCLOAK_REALM=master
# Keycloak client ID for admin_side
PUBLIC_KEYCLOAK_CLIENT_ID=my-blogs-admin-localhost
# Keycloak scope (includes my-cms API access)
PUBLIC_KEYCLOAK_SCOPE=my-headless-cms-api-all email openid profile
```

### Cache Configuration (Optional)
```bash
# Enable homepage cache (optional)
HOME_PAGE_CACHE_ENABLED=false
```

## Development Setup

1. Copy this file to `.env.local` in the admin_side directory
2. Update the values according to your environment
3. Never commit `.env.local` to version control

## Example .env.local

```bash
# Backend API (my-cms)
PUBLIC_GRAPHQL_API_URL=http://localhost:8989/graphql
PUBLIC_GRAPHQL_CACHE_API_URL=http://localhost:8989/graphql
PUBLIC_REST_API_URL=http://localhost:8989/api
PUBLIC_MEDIA_UPLOAD_API_URL=http://localhost:8989/api/media/upload

# Keycloak
PUBLIC_KEYCLOAK_URL=https://my-ids-admin.ducth.dev
PUBLIC_KEYCLOAK_REALM=master
PUBLIC_KEYCLOAK_CLIENT_ID=my-blogs-admin-localhost
PUBLIC_KEYCLOAK_SCOPE=my-headless-cms-api-all email openid profile

# Optional
HOME_PAGE_CACHE_ENABLED=false
```

## Production Example

```bash
# Backend API (my-cms production)
PUBLIC_GRAPHQL_API_URL=https://my-cms-api.ducth.dev/graphql
PUBLIC_GRAPHQL_CACHE_API_URL=https://my-cms-api.ducth.dev/graphql
PUBLIC_REST_API_URL=https://my-cms-api.ducth.dev/api
PUBLIC_MEDIA_UPLOAD_API_URL=https://my-cms-api.ducth.dev/api/media/upload

# Keycloak
PUBLIC_KEYCLOAK_URL=https://my-ids-admin.ducth.dev
PUBLIC_KEYCLOAK_REALM=master
PUBLIC_KEYCLOAK_CLIENT_ID=admin-side-production
PUBLIC_KEYCLOAK_SCOPE=my-headless-cms-api-all email openid profile

# Optional
HOME_PAGE_CACHE_ENABLED=true
```

## Notes

- **my-cms Backend**: https://github.com/doitsu2014/my-cms (Rust-based headless CMS)
  - Provides both **GraphQL** and **REST API** endpoints
  - Default port: 8989
- **Keycloak**: Authentication uses Authorization Code Flow with PKCE
- **Scope**: `my-headless-cms-api-all` grants access to my-cms API endpoints
- **PKCE**: Must be enabled (S256) in Keycloak client configuration
- Make sure my-cms backend is running before starting admin_side
